import{S as z,P,W as _,O as R,B as W,a as B,T as L,b as G,A as M,c as T}from"./three-cea84195.js";import{i as k}from"./dat.gui-637acc3d.js";import{S as E}from"./stats.js-e9b58a7b.js";import{d as H,a as U,n as F,b as O,o as j}from"./@vue-aea57c88.js";const q=""+new URL("rain-ee8fda4a.png",import.meta.url).href,V=H({__name:"raining",setup(I){const a=U(null);let s=new z,n,r,i,l,o;const d=5e3;F(()=>{g(a.value.clientWidth,a.value.clientHeight),w(a.value.clientWidth,a.value.clientHeight),v(),u(),h(),C()});const g=(t,e)=>{n=new P(75,t/e,.1,40),n.position.set(0,0,40),s.add(n)},w=(t,e)=>{r=new _,r.setSize(t,e),a.value.appendChild(r.domElement),r.render(s,n)},h=()=>{l=new E,a.value.appendChild(l.dom)},v=()=>{i=new R(n,r.domElement),i.enableDamping=!0,i.enableZoom=!0,i.autoRotate=!1,i.enablePan=!0},u=()=>{if(i.update(),r.render(s,n),l&&l.update(),o){const t=o.geometry.getAttribute("position").array;for(let e=0;e<d*3;e+=3)t[e+1]-=Math.random()*1,t[e+1]<-40&&(t[e+1]=40);o.geometry.getAttribute("position").needsUpdate=!0}requestAnimationFrame(u)},C=()=>{const t=new k.GUI,e={size:1,transparent:!0,opacity:.5,vertexColors:!1,sizeAttenuation:!0,color:15592941,rotateSystem:!1,reDraw:()=>{o&&s.remove(o),x(e.size,e.transparent,e.opacity,e.vertexColors,e.sizeAttenuation,e.color),i.autoRotate=e.rotateSystem}};t.add(e,"size",.1,3).onChange(e.reDraw),t.add(e,"transparent").onChange(e.reDraw),t.add(e,"opacity",.1,1).onChange(e.reDraw),t.add(e,"vertexColors").onChange(e.reDraw),t.add(e,"sizeAttenuation").onChange(e.reDraw),t.addColor(e,"color").onChange(e.reDraw),t.add(e,"rotateSystem").onChange(e.reDraw),e.reDraw()},x=(t,e,y,b,A,D)=>{let p=new W,m=new Float32Array(d*3);for(let c=0;c<d*3;c++)m[c]=(Math.random()-.5)*100;p.setAttribute("position",new B(m,3));let f=new L().load(q),S=new G({size:t,transparent:e,opacity:y,vertexColors:b,sizeAttenuation:A,color:D,depthTest:!0,depthWrite:!1,map:f,alphaMap:f,blending:M});o=new T(p,S),s.add(o)};return window.addEventListener("resize",()=>{n.aspect=a.value.clientWidth/a.value.clientHeight,n.updateProjectionMatrix(),r.setSize(a.value.clientWidth,a.value.clientHeight),r.setPixelRatio(window.devicePixelRatio)}),(t,e)=>(j(),O("div",{id:"canvas",ref_key:"canvas",ref:a},null,512))}});export{V as default};
