import{d as E,a as H,n as B,b as h,k as w,F as v,y as N,o as _,z as D,l as G,m as I}from"./@vue-2f3294d6.js";import{S as y,w as U,T as V,K,p as P,e as u,P as q,W as Q,N as X,O as Y,h as Z,z as $,E as J,n as ee,o as te,Q as ae,k as se,U as oe}from"./three-97728b49.js";import{S as re}from"./stats.js-e9b58a7b.js";import{g as r}from"./utils-fc0332a4.js";import{_ as ne}from"./index-ef9e00ad.js";import"./vue-router-f4091d07.js";import"./axios-08622986.js";const ie={class:"right"},ce=["onClick"],le=["src"],de=E({__name:"sofaTextureChange",setup(ue){const a=H(null);let c=new y,n,s,l,g;const j=new U,C=new V,f=new K;let p,o,b=null;const S=[{type:"color",texture:"rgb(137, 78, 84)"},{type:"color",texture:"rgb(231, 124, 142)"},{type:"color",texture:"rgb(188, 132, 168)"},{type:"color",texture:"rgb(82, 82, 136)"},{type:"color",texture:"rgb(26, 148, 188)"},{type:"image",texture:r("sofa/texture/Fabric_035_basecolor.jpg")},{type:"image",texture:r("sofa/texture/White fabric_200_DB.jpg")},{type:"image",texture:r("sofa/texture/Fabric_036_basecolor.jpg")},{type:"image",texture:r("sofa/texture/Fabric_Rug_006_COLOR.jpg")},{type:"image",texture:r("sofa/texture/Fabric_Knitted_004_basecolor.jpg")},{type:"image",texture:r("sofa/texture/Fabric_Alcantara_001_basecolor.jpg")},{type:"image",texture:r("sofa/texture/Wood_Wicker_009_basecolor.jpg")},{type:"image",texture:r("sofa/texture/Wood_026_basecolor.jpg")},{type:"image",texture:r("sofa/texture/Wood_025_basecolor.jpg")},{type:"image",texture:r("sofa/texture/Bark_06_basecolor.jpg")},{type:"image",texture:r("sofa/texture/Merano_diffuse_02.jpg")}],k=()=>{c=new y,c.background=new u("rgb(226, 225, 225)")},L=(t,e)=>{n=new q(100,t/e,.01,1e3),n.position.set(-1,1,2),c.add(n)},M=(t,e)=>{s=new Q({antialias:!0}),s.shadowMap.enabled=!0,s.shadowMap.type=X,s.setSize(t,e),s.setPixelRatio(window.devicePixelRatio),a.value.appendChild(s.domElement),s.render(c,n)},W=()=>{g=new re,a.value.appendChild(g.dom)},O=()=>{l=new Y(n,s.domElement),l.enableDamping=!0,l.enableZoom=!0,l.autoRotate=!1,l.enablePan=!0,l.minDistance=1.8,l.maxDistance=5,l.minPolarAngle=Math.PI/4,l.maxPolarAngle=Math.PI/2.1},F=()=>{const t=new Z(new u("rgb(206, 206, 206)")),e=new $(new u("rgb(128, 128, 128)"));e.position.set(5.5,4,4.5),e.castShadow=!0,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=2048,e.shadow.camera.near=.5,e.shadow.camera.far=500,e.shadow.camera.left=-10,e.shadow.camera.right=10,e.shadow.camera.top=10,e.shadow.camera.bottom=-10,c.add(t,e)},R=()=>{p=new J(s);const t=new ee(c,n);p.addPass(t),o=new te(new P(a.value.clientWidth,a.value.clientHeight),c,n),o.visibleEdgeColor.set(new u("rgb(255, 0, 0)")),o.edgeThickness=2,o.edgeStrength=10,o.edgeGlow=.1,o.pulsePeriod=1.5,p.addPass(o);const e=new ae(a.value.clientWidth,a.value.clientHeight);p.addPass(e)},x=()=>{l.update(),s.render(c,n),g&&g.update(),p&&p.render(),requestAnimationFrame(x)},A=()=>{j.load(r("sofa/sofa.glb"),t=>{t.scene.traverse(e=>{e instanceof se&&(e.name==="plane"?(e.material=new oe({color:new u("rgb(211, 211, 211)")}),e.receiveShadow=!0):e.castShadow=!0)}),t.scene.scale.set(.02,.02,.02),t.scene.position.set(0,-1.4,0),b=t.scene,c.add(t.scene)})},T=t=>{const e=new P;if(!a.value)return;e.x=t.clientX/a.value.clientWidth*2-1,e.y=-(t.clientY/a.value.clientHeight)*2+1,f.setFromCamera(e,n);const i=f.intersectObjects(c.children);if(i.length>0){const d=i[0].object;if(d.name==="plane"){o.selectedObjects=[];return}o.selectedObjects=[d]}else o.selectedObjects=[]},z=t=>{if(o.selectedObjects.length===0)return;const e=o.selectedObjects[0].name,i=b.getObjectByName(e);if(t.type==="color"){const d=new u(t.texture),m=i.material;m.color.set(d),m.map=null,m.needsUpdate=!0}else if(t.type==="image"){const d=i.material;C.load(t.texture,m=>{d.color.set(new u(1,1,1)),d.map=m,d.needsUpdate=!0})}};return window.addEventListener("click",T,!1),B(()=>{k(),L(a.value.clientWidth,a.value.clientHeight),M(a.value.clientWidth,a.value.clientHeight),O(),x(),W(),F(),R(),A()}),window.addEventListener("resize",()=>{n.aspect=a.value.clientWidth/a.value.clientHeight,n.updateProjectionMatrix(),s.setSize(a.value.clientWidth,a.value.clientHeight),s.setPixelRatio(window.devicePixelRatio)}),(t,e)=>(_(),h(v,null,[w("div",{id:"canvas",ref_key:"canvas",ref:a},null,512),w("div",ie,[(_(),h(v,null,N(S,(i,d)=>w("div",{class:"box",key:d,onClick:D(m=>z(i),["stop","prevent"])},[i.type==="color"?(_(),h("div",{key:0,style:G({backgroundColor:i.texture,width:"100%",height:"100%"})},null,4)):i.type==="image"?(_(),h("img",{key:1,src:i.texture,width:"50",height:"50"},null,8,le)):I("",!0)],8,ce)),64))])],64))}});const be=ne(de,[["__scopeId","data-v-15cbffd9"]]);export{be as default};
