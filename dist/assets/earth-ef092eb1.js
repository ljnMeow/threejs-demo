import{d as Ge,a as J,n as Ce,b as te,e as Ae,j as Ee,T as Fe,k as z,o as ne,l as Be,t as We,m as ke}from"./@vue-aea57c88.js";import{G as T,T as Oe,d as Re,M as Ve,V as b,R as He,C as Ie,B as k,L as $,e as w,f as U,g as Ne,S as je,F as De,P as qe,W as Je,O as $e,h as Ue,a as ae,b as Xe,A as oe,c as Ze,i as se,j as re,D as O,k as G,l as Ke,m as X,E as Qe,n as Ye,o as et,p as tt,q as nt,r as at,s as ot,t as st,u as rt}from"./three-cea84195.js";import{S as it}from"./stats.js-e9b58a7b.js";import{g as ie}from"./gsap-10963069.js";import{g}from"./utils-157cc910.js";import{_ as lt}from"./index-a2fec666.js";import"./vue-router-2ef0d3d1.js";import"./axios-08622986.js";const ct={key:0,class:"loading"},dt={class:"content"},pt={class:"box"},ut=Ge({__name:"earth",setup(ht){const i=J(null);let c,u,h,f,C,S;const _=new T;let M,A;const m=new T,R=1e4,E=new Ne,y=new Oe(E),le=new Re(E),ce=new Ve(E),V=J(0),Z=J(!0);let P,x,F=0;const H=.001,I=[],v=[{lnglat:[[116.4,39.91],[109.51,18.25]],color:"rgb(192, 44, 56)"},{lnglat:[[116.4,39.91],[169.14,67.74]],color:"rgb(129, 60, 133)"},{lnglat:[[116.4,39.91],[22.9,51.23]],color:"rgb(32, 161, 98)"},{lnglat:[[116.4,39.91],[35.75,-6.17]],color:"rgb(255, 20, 147)"},{lnglat:[[116.4,39.91],[-56.89,-14.54]],color:"rgb(255, 153, 0)"},{lnglat:[[116.4,39.91],[58.48,40.74]],color:"rgb(0, 255, 255)"},{lnglat:[[116.4,39.91],[76.77,12.93]],color:"rgb(75, 0, 130)"}],B=[];E.onProgress=function(e,t,n){let a=t/n*100;V.value=Math.ceil(a),a===100&&setTimeout(()=>{Z.value=!1,ie.to(m.position,{z:0,ease:"Power2.inOut",duration:1}),ie.to(_.rotation,{y:10,ease:"Power2.inOut",duration:2,onComplete(){B.length===0&&Pe()}})},1e3)},Ce(()=>{de(),pe(i.value.clientWidth,i.value.clientHeight),ue(i.value.clientWidth,i.value.clientHeight),ge(),K(),he(),me(),we(),fe(),ye(),ve(),_e(),m.position.set(0,0,-100),c.add(m)});const de=()=>{c=new je,c.background=new w(133412),c.fog=new De(133412,200,1e3)},pe=(e,t)=>{u=new qe(75,e/t,1,1e3),u.position.set(0,0,14),c.add(u)},ue=(e,t)=>{h=new Je({antialias:!0}),h.setSize(e,t),i.value.appendChild(h.domElement),h.render(c,u)},he=()=>{C=new it,i.value.appendChild(C.dom)},ge=()=>{f=new $e(u,h.domElement),f.enableDamping=!0,f.enableZoom=!0,f.autoRotate=!1,f.enablePan=!0,f.zoomSpeed=1.8},me=()=>{const e=new Ue(new w("rgb(222, 237, 255)"));c.add(e)},we=()=>{let e=new k,t=new Float32Array(R*3),n=new Float32Array(R*3);for(let o=0;o<R;o++){let r=(Math.random()-.5)*1e3,d=(Math.random()-.5)*1e3,p=(Math.random()-.5)*1e3;t[o*3+0]=r,t[o*3+1]=d,t[o*3+2]=p;let s=new w;s.setHSL(Math.random()*.2+.5,.55,Math.random()*.25+.55),n[o*3+0]=s.r,n[o*3+1]=s.g,n[o*3+2]=s.b}e.setAttribute("position",new ae(t,3)),e.setAttribute("color",new ae(n,3));let a=y.load(g("star.png")),l=new Xe({map:a,size:1,transparent:!0,opacity:1,vertexColors:!0,depthTest:!0,depthWrite:!1,blending:oe,sizeAttenuation:!0});S=new Ze(e,l),c.add(S)},fe=()=>{const e=new se(5,32,32),t=y.load(g("earth/earth.png")),n=y.load(g("earth/earth_bump.png")),a=y.load(g("earth/earth_spec.png")),l=new re({map:t,bumpMap:n,bumpScale:.15,specularMap:a,specular:new w("#909090"),shininess:5,transparent:!0,side:O}),o=new G(e,l);_.add(o);const r=new se(5.1,40,40),d=y.load(g("earth/earth_cloud.png")),p=new re({map:d,transparent:!0,opacity:1,blending:oe,side:O}),s=new G(r,p);_.add(s),_.rotation.set(.5,0,-.4),m.add(_),c.add(m)},ye=()=>{const e=new Ke(8,.2,2,200),t=new X({color:new w("rgb(147, 181, 207)"),transparent:!0,opacity:.4});M=new G(e,t),M.rotation.set(1.7,.5,1),M.updateMatrix(),P=new Qe(h);const n=new Ye(c,u);P.addPass(n);const a=new et(new tt(i.value.clientWidth,i.value.clientHeight),c,u);P.addPass(a),a.pulsePeriod=0,a.visibleEdgeColor.set(new w("rgb(147, 181, 207)")),a.usePatternTexture=!1,a.edgeStrength=2,a.edgeGlow=1,a.edgeThickness=1,a.selectedObjects=[M],m.add(M)},ve=()=>{const n={x:0,y:0,z:0},a=[];for(let s=0;s<=300;s++)a.push(new b(9*Math.sin(Math.PI*2*s/300)+n.x,9*Math.cos(Math.PI*2*s/300)+n.y,n.z));x=new nt(a,!0,"catmullrom",.5);const l=x.getPoints(50),o=new k().setFromPoints(l),r=new $({transparent:!0,opacity:0}),d=new U(o,r);d.rotation.set(1.7,.5,1);const p=new st;p.makeRotationFromEuler(M.rotation);for(let s=0;s<x.points.length;s++)x.points[s].applyMatrix4(p);m.add(d)},_e=()=>{ce.load(g("satellite/Satellite.mtl"),e=>{e.preload(),le.setMaterials(e).load(g("satellite/Satellite.obj"),t=>{t.position.copy(x.points[0]),A=t,m.add(A)})})},N=(e,t,n)=>{const a=(90+e)*(Math.PI/180),l=(90-t)*(Math.PI/180),o=new rt(n,l,a),r=new b;return r.setFromSpherical(o),r},Me=(e,t)=>{const n=new T,a=new at(.3,.3),l=y.load(g("wave.png")),o=new X({map:l,color:t,transparent:!0,opacity:1,side:O,depthWrite:!1});let r=new G(a,o);r.size=5.1*.3,r._s=Math.random()*1+1,I.push(r);const d=new ot(0,.05,.5,32),p=y.load(g("lightray.png")),s=new X({map:p,color:t,side:O,transparent:!0,opacity:1,depthWrite:!1}),L=new G(d,s);L.rotateX(Math.PI/2),L.position.z=.25,n.add(r,L),n.position.set(e.x,e.y,e.z);const j=new b(e.x,e.y,e.z).normalize(),Q=new b(0,0,1);return n.quaternion.setFromUnitVectors(Q,j),n},Pe=()=>{const e=new T,t=new T;for(let n=0;n<v.length;n++){v[n].lnglat.forEach(o=>{const r=N(o[0],o[1],5.1);e.add(Me(r,v[n].color))});const a=N(v[n].lnglat[0][0],v[n].lnglat[0][1],5.1),l=N(v[n].lnglat[1][0],v[n].lnglat[1][1],5.1);t.add(xe(a,l))}_.add(e,t)},xe=(e,t)=>{const n=e.angleTo(t)*180/Math.PI,a=n*.04,l=n*n*.1,o=new b(0,0,0),r=e.clone().add(t.clone()).divideScalar(2),d=new He(o,r),p=new b;let s=d.at(l/d.at(1,p).distanceTo(o),p),L=e.clone().lerp(s,a/e.clone().distanceTo(s)),j=t.clone().lerp(s,a/t.clone().distanceTo(s));const D=new Ie(e,L,j,t).getSpacedPoints(100),be=new k().setFromPoints(D),Se=new $({color:new w("rgb(255, 255, 255)"),linewidth:1,transparent:!0,opacity:0}),Le=new U(be,Se);c.add(Le);const q=0,Y=5;let ze=D.splice(q,q+Y),W=new k().setFromPoints(ze);W.points=D,W.num=Y,W._index=q;var Te=new $({linewidth:1,color:new w("rgb(254, 215, 26)")}),ee=new U(W,Te);return B.push(ee),ee},K=()=>{if(f.update(),h.render(c,u),C&&C.update(),P&&P.render(),S&&(S.rotation.y+=9e-4,S.rotation.z-=3e-4),A)if(F<=1-H){const e=x.getPointAt(F+H);F+=H,A.position.copy(e)}else F=0;B.length&&B.forEach(e=>{let t=e.geometry,n=t.points,a=JSON.parse(JSON.stringify(n)),l=t.num,o=a.splice(t._index,t._index+l);t.setFromPoints(o),t._index<n.length?t._index+=1:t._index=0}),I.length&&I.forEach(e=>{e._s+=.01,e.scale.set(e.size*e._s,e.size*e._s,e.size*e._s),e._s<=1.5?e.material.opacity=(e._s-1)*2:e._s>1.5&&e._s<=2?e.material.opacity=1-(e._s-1.5)*2:e._s=1}),requestAnimationFrame(K)};return window.addEventListener("resize",()=>{u.aspect=i.value.clientWidth/i.value.clientHeight,u.updateProjectionMatrix(),h.setSize(i.value.clientWidth,i.value.clientHeight),h.setPixelRatio(window.devicePixelRatio),P.setSize(i.value.clientWidth,i.value.clientHeight)}),(e,t)=>(ne(),te("div",null,[Ae(Fe,null,{default:Ee(()=>[Z.value?(ne(),te("div",ct,[z("div",dt,[z("div",pt,[z("div",{class:"process",style:Be({width:`${V.value}%`})},null,4)]),z("p",null,We(`${V.value}%`)+" Loading......",1)])])):ke("",!0)]),_:1}),z("div",{id:"canvas",ref_key:"canvas",ref:i},null,512)]))}});const Pt=lt(ut,[["__scopeId","data-v-1f791ad0"]]);export{Pt as default};
